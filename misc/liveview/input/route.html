<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Sunswift SRT - Media Event - Route</title>

	<!-- Framework CSS -->
  	<link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection" />
  	<link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print" />
    <!--[if IE]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection" /><![endif]-->
  	<!-- Import fancy-type plugin. -->
  	<link rel="stylesheet" href="css/blueprint/plugins/fancy-type/screen.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="css/master.css" type="text/css" media="screen, projection" />

	<script type="text/javascript" src="javascript/prototype-1.6.0.3.js" charset="utf-8"></script>
	
    <!-- load the correct google maps api for this domain --> 
    <script type="text/javascript"> 
      var google_map_script = '';

      if( location.host == "www.sunswiftlive.com" ){
      	google_map_script = '<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAJYrtw7ANHtX-M3oWTqnemhRmmkB7vgSIZFwMwKLkC1iFXkRNGRRcuvP9x6HndHfAH3KUF78YV6bV6Q" type="text/javascript"><\/script>';
      } else if (location.host == "www.solarcarlive.com") {
      	google_map_script = '<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAJYrtw7ANHtX-M3oWTqnemhSRFR0QgO4kT52_lvWfJaGzNeAjyBS0N_6BhQ1HTwGRJaeMb_yRTyECEQ" type="text/javascript"><\/script>';
      } else if (location.host == "209.20.64.192:8006") {
      	google_map_script = '<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAASEdh0291ptiujFeTHsRi9xRYivQD50oDK4Kx1XewmsGlY6z6RxTub40sAtO9qv_hAON92A5zq3xVBA" type="text/javascript"><\/script>';
      } else {
		google_map_script = '<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAASEdh0291ptiujFeTHsRi9xRJPqG67GU9VKYXBirrYJsdhXqBBxSTdK19NHckMuLA3MDYch4hhjsdMw" type="text/javascript"><\/script>';      
      }

      document.write(google_map_script);
    </script> 
    
    <script type="text/javascript">
      function timedRefresh(timeoutPeriod) {
      setTimeout("location.reload(true);",timeoutPeriod);
      }

      function initialize() {
		if (GBrowserIsCompatible()) { 
		
		      // Display the map, with some controls and set the initial location 
		      var map = new GMap2(document.getElementById("map_canvas"));
		      map.addControl(new GLargeMapControl());
		      map.addControl(new GMapTypeControl());
		      map.addControl(new GScaleControl());
		      map.setCenter(new GLatLng(-33.845897,151.034546),11);
		    
		      // arrays to hold copies of the markers and html used by the side_bar
		      // because the function closure trick doesnt work there
		      var side_bar_html = "";
		      var gmarkers = [];
		      var htmls = [];
		      var i = 0;
              
              var route_line = new GPolyline.fromEncoded({
                color: "#0000FF",
                weight: 5, 
                points: "tf}mEk_az[E?A???FJXP\\BZHVJDx@G~AZ|@v@h@VPB@B?B@@@TPJv@w@nBoAhCoAtCcAhDgAxDcAdDy@bC_@hAIV@AIVq@~AuArBeB|BiB`CcB|BmA~Ae@h@ED?A@CB??@@A???A???B@@@B@?@AE?C@GLUdAUdCQtCOlDOlDMlDOhDO|DGxC?|B\\j@`B^rCj@rCh@dBXd@HD?@?@?BB????@?@?P@lARtBZxC`@|C`@bD^vDb@fEd@`EThEHvDJvDVhEj@fEt@jEx@dEp@bEh@vEh@zEb@jEMrDoAbDwCfCaEhCsDdDmCvDaA|D@~DbApDpBfDzBnD~BjD~BfDvBnD|BjDvBdDrCnBfEdApEt@rEVhFO~FS~FBpFPpFf@hFh@jEdA~DjAtDtAhE`BtErBjDrCpB`Dr@bDFdDPlDtAfCjCzAvDdAbEv@bEl@nEl@lEl@zEj@nEn@zEh@fERfEFzE?lE?lE?|D?hE?bE?lEQzDApFn@zDf@vDf@xDVjEKxEi@dEiAvDwAtD}ApDeBxDgBzDcBxDeBzDaBrDoAjC_BzBiBfC_CpC{BlC}BhCsBbC{BhC}BnCyBlCyBlCuBfCuBhCgBzBQ~DF`EH`EFbEF`EH`EFnEFtDH`EFbEF`EH`EFbEHlEFfEFpDF`EHnEFtDF`EHbEF`EH`EFbEF`EH`EFbEF`EH`EFnEFtDH`EF|DFfEH`EFbEF`EHbEFlEFvDPrF\\pFPnE^hEv@bFpAjFdB~EfBzE`BnFxAbGdAtGr@bH^zG\\|GX~GLrGOdGUzFIzFTtF|@|FbBxFhBvFjBzF~AzFfAzF`AjGh@pGTfGDlGAfGAbG?nGAlGCfGEvGG|FKlFQ~FUtG[pG]fG]|Fa@~Fa@nGa@pGc@rG_@dGa@fGa@hGc@vGc@zGc@pGc@pGa@jG_@fG]xGa@`He@`HYrG?fGVxGf@xGb@pGf@tG`@bGZzFHfGAnGSvGa@nGi@jGi@hGg@rGi@hGi@lGSbGLdGp@fGvAzFtBfFvBbFrBxEpBzE`BxFbA~F`@tG@pGKtGMpGKxG@vGXhGb@`Gd@~Fd@fGd@dGd@jGd@nGf@pGf@~Gj@|Gv@lG`AfGhAxFdA~Fz@pGf@jGTzFDzF?nFEbFW`Fe@fFm@bFe@~EYnE]rE[|E[xEa@xEw@bFgA|EwAfF_B~EcBxEeBzEaBtEoA~Eq@~Ec@fF]dF]fF_@pF_@pF_@pF_@pF]fF_@fFa@pF_@jF]~Ec@bF_@vF]jF]tF]xFY|EYxEW|EWxEWnEYvE_@~Em@lFu@pGw@|Go@dHIrGb@zGtAfG~BjF|CnE`D|DfDbEbDbEfDbE|C|D~CzD~CxDxCzDrCtEzBpFzAxFbAtFdAbGlAhGnA`GjAbGjArFvAjF`BdGb@rGm@`GkBdFgD`EaEnBaE\\iEa@sE}@cF}@sE}@{EcAmEo@iFCgFn@sEdBqDtCuCzDqB~EuAxFiAhGoAnGkBfGgCpEmDlD}D~BgEnBeErBgEzByDpC_DdDwC~DkCbFsBtFuAtFsA|FaBfF}B|EyClEyD|DkE~CeEzBsDlBeDfBcEvBkE|BoE~BmEzBoEdBaEdAkE~@qE~@kE|@cFdAyE`AsEdAyE`BoEfC{D`DeD~DkClEcCxEiCbFsC`FgDjEoDhD{DhC}DjBuEvAkEr@_FZ{EEwE_@mE{@cEwAaEoByDcCuDcCuDaCiD{BmD}BiDyBwDcCyDgCcEsCyDeCuD_C{D}BmEsB_FcBqFsAwFy@_Go@wFi@aFg@{Ei@aFq@gF_A_FgAwEiAkEgAsEgA}EkA{EkAyEgAoE{@iEq@wEw@aFoAoEcBcEeBaEaBaEyAoEwA}EqAqEeAcFcA_Fw@sEo@eFo@sFk@iFc@aF]kFUoFScFSgFSiFOcFHyEd@sE`AmEzAkExBaE~BeE`CeE`CgExBuEtAoEb@gF@kFAeFCaFCwEA_FCsECaFGiFQeF[aFc@_Fk@yEk@{Ei@_Fk@sEi@yEo@}Em@aFk@wFu@}Fs@kFy@cF}@wE{@gE{@oE}@oE_AwE_A}EcAwEaAcFcAcFq@oFSiFNwEh@uEfAmEbB}DtBaE|CiDlDeDnEgCrEwB~EyB`FgCvE_D`EyDhDsEhC}EdBgFv@_FNaFSgFs@oFu@iFs@cFs@{Eo@qEg@}EE_F\\wEdAwE~AsE|A}EbAiFXkFQiFk@{Eo@{Em@qFq@sEk@cFo@sFs@kFo@qFo@mFo@eFi@sFm@yFaAkEwBeEoD{CyEoBsF_A{FUeGTyGr@kGr@cGr@aGt@gGt@eGv@{Gt@sGv@sGp@_Gp@{Fp@mGt@{Gt@qGn@oGd@mHVqGPiGTiHTsGRwGR}GPiGRmGTqGPkGTsGPkGRcGRsGPcGRqGTgGZcG\\_Gd@aGb@kGb@aGb@_Gd@eGf@qGh@iGn@aHt@_Hx@yG~@uG~@qG`AaGdAcGfAmGjAwGdA_GfAkGdA_G`AoFjAcGvAsGvAcG~AmG|AsFbBwFlBaGvBmGvByFxBoFzBeF~BiFbCaFbCwEtCiFxCeFvCwEzCqEtCeEnCaExCeEdDgEhD{DnDuD~DsD~DcDrDqC`EoC`EgCzDcC~DgCzDcC|DiCjEqCfEkC~DgCzDoCdDiD`CiD|BqE`BsFlAqGf@gGHgGKsGUuGa@gHc@qGi@oGq@yFo@wFw@{F}@cG_A{F{@uFu@cFcAwFcAeGcA{FoAsFaAqF{@mFw@uFm@mGa@iG]{GYcG_@cG]yF]yFg@_G}@wFgAeFwAeF_BwEgByEgB}E{AiFcA{Fc@{FGeGZmGx@kFvAmFbByEjAeFf@_GCgGs@eGgB{FmC}EmCgEiCkEyBmF}AwF_AoFeAiG}@uFq@wFg@wF_@uGYqGYgHYmGa@kGq@cHu@uGo@{Fk@oFm@sFg@sFMwFLmGr@uGnA{FjBeFdCwErCmEpCgEhCqE`BcFz@sFZmGVmGXkGd@}Ft@}F`AqF|@kFdA}FbAeG\\yF?mF?kF@gF@kF?qF?oFFsFt@sGvAgGbA_G\\gGQoGm@{Fs@kGo@eG]qGAkGTmGl@iGbAuFvAiFlB}EjCiFxCmEvCmDzC{CpD}BfEgCjDuDdCuE`BqFvAqF`CcF|C{EvCsEpCoEnCeElCeElCeEnCkExCuEpCgExC}DxDqCrE_BrEk@xEG|EEzEOfEm@`EiA~DaApEi@bF_@tFm@`FsA~DiBtDiBhCaC|BeDjBsD`BgElAiErAoE`BeD`B{CrB}CxBwCnBoCxByC|B}CxB{ChA_Dp@oEn@eEn@gEp@oEn@mEn@gEp@oEl@{Dr@yEl@cEl@aEt@{En@kEp@iEl@eEt@_Fj@uDr@yEp@qEl@}Dn@iEn@gEp@oEn@iEn@kEp@iEn@kEn@kEp@iEn@kEn@kEp@iEv@cFd@qE\\uF@uFK{EY_Fe@uEs@gEeAqEeAcFg@uFBwFx@aF`BiEnCsDzC}BjDgBtDqBpDuBnDwBdD_CvCeCvCcCnCsBvCcCpCeDpBwDdBcFv@oFt@iFxAqErByDdCwC|C_CrD_BxD_AxD?~Dn@zCpB`CxBdCrBzCdBjDzA|DfA~Dn@|D\\dERlDPtDLjDLvDOpDc@fDw@fD{@pCq@tBc@dBa@~Aa@xBg@lC]hCCrCVxCx@vCxAlCjAnBlA~CdBvDdCpCxAxBlA~BtAjBdAbB~@`CpArCzAfCpArBv@jBh@jBBlA_Ah@}BPmDPwEPwE@}DDyDT{D`",
                                levels: "BBB",
                zoomFactor:32, 
                numLevels: 4
                });
               map.addOverlay(route_line);
		        
		      // This function picks up the click and opens the corresponding info window
		      function myclick(i) {
		        gmarkers[i].openInfoWindowHtml(htmls[i]);
		      }
                        
		      // A function to create the marker and set up the event window
		      function addMarker(marker,name,html) {
		        GEvent.addListener(marker, "click", function() {
		          marker.openInfoWindowHtml(html);
		        });
		        // save the info we need to use later for the side_bar
		        gmarkers[i] = marker;
		        htmls[i] = html;
		        // add a line to the side_bar html
		        side_bar_html += '<li><a href="javascript:myclick(' + i + ')">' + name + '<\/a></li>';
		        i++;
		        return marker;
		      }
              
              // A function to create the marker and set up the event window
		      function createMarker(point,name,html) {
		        var marker = new GMarker(point);
		        return addMarker(marker, name, html);
		      }
              
              // Solar car marker
              ss3_loc = new GLatLng(<<<<CHANNEL/ControlGPS/Latitude>>>>, <<<<CHANNEL/ControlGPS/Longitude>>>>);
              gicon = new GIcon(G_DEFAULT_ICON)
              gicon.iconSize = new GSize(100, 35);
              gicon.image = "images/ss3icon.png";
//              gicon.shadow = "images/ss3icon-shadow.png";
//              gicon.shadowSize = new GSize(59, 32);
	      gicon.iconAnchor = new GPoint(40, 17);
              ss3_marker = new GMarker(ss3_loc, gicon);
              
              // Markers
              var html = "<h3>Solar car</h3><p><b>Speed:</b> <<<<CHANNEL/Motor Controller/Speed>>>>km/h<br><b>Power:</b> <<<<CHANNEL/Negsum/Motor Power>>>>W</p><p><img width=180 src=\"imgdir/<<<<WEBCAMIMAGE>>>>\"></p><br>"
              var label = "Sunswift 3"
              GEvent.addListener(ss3_marker, "click", function() {
          		ss3_marker.openInfoWindowHtml(html);
        	  });
              addMarker(ss3_marker, label, html)

              // SS3 info window by default
              map.openInfoWindow(ss3_loc, html)

              // Add the marker over the top
              map.addOverlay(ss3_marker)

                                
		      // Read the data from example4.xml
		      var request = GXmlHttp.create();
		      request.open("GET", "routedata.xml", true);
		      request.onreadystatechange = function() {
		        if (request.readyState == 4) {
		          var xmlDoc = GXml.parse(request.responseText);
		          // obtain the array of markers and loop through it
		          var markers = xmlDoc.documentElement.getElementsByTagName("marker");
		          
		          for (var i = 0; i < markers.length; i++) {
		            // obtain the attribues of each marker
		            var lat = parseFloat(markers[i].getAttribute("lat"));
		            var lng = parseFloat(markers[i].getAttribute("lng"));
		            var point = new GLatLng(lat,lng);
		            var html = markers[i].getAttribute("html");
		            var label = markers[i].getAttribute("label");
		            // create the marker
		            var marker = createMarker(point,label,html);
		            map.addOverlay(marker);
		          }
		          // put the assembled side_bar_html contents into the side_bar div
		          // document.getElementById("side_bar").innerHTML = "<ul>" + side_bar_html + "</ul>";

		          // Now process the polylines
		          var lines = xmlDoc.documentElement.getElementsByTagName("line");
		          // read each line
		          for (var a = 0; a < lines.length; a++) {
		            // get any line attributes
		            var colour = lines[a].getAttribute("colour");
		            var width  = parseFloat(lines[a].getAttribute("width"));
		            // read each point on that line
		            var points = lines[a].getElementsByTagName("point");
		            var pts = [];
		            for (var i = 0; i < points.length; i++) {
		               pts[i] = new GLatLng(parseFloat(points[i].getAttribute("lat")),
		                                   parseFloat(points[i].getAttribute("lng")));
		            }
		            map.addOverlay(new GPolyline(pts,colour,width));
		          }
         
		        }
		      }
		      request.send(null);
		
		    } else {
		      alert("Sorry, the Google Maps API is not compatible with this browser");
		    }      
    }
    </script>
<link rel="shortcut icon" href="http://209.20.64.192:8006/images/favicon.ico" />
</head>

<body onload="timedRefresh(60000); initialize()">

<div class="container">

    <div id="header" class="span-24 last">
    	<div id="live">Last updated LIVE at: <<<<TIME>>>></div>
    	<div><img src="images/sunswift_logo.png" width="250" height="83" alt="Sunswift Logo" />
		<div id="navlist">
			<ul>
				<li><a href="index.html" alt="">Home</a></li>
				<li class="here inPath"><a href="route.html" alt="">Route / Car position</a></li>
				<li><a href="carstatus.html" alt="">Car status graphs</a></li>
				<li><a href="gps.html" alt="">GPS graphs</a></li>
				<li><a href="modelling.html" alt="">Modelling graphs</a></li>
			</ul>
		</div></div>
    </div>

    
    <div id="head_title" class="span-24"><span class="title">Map / Position</span></div>
    
    <div class="prepend-3 span-24" id="content">
    
      <p id="eventcontent">
		<div id="map_canvas" style="width:640px; height:480px"></div>
		<!-- <div id="side_bar"></div> -->
      </p>
      
    </div>

	<div class="span-24 ">&nbsp;</div>

   	<hr />
   	
    <div id="footer" class="span-24 last" style="text-align:center;">Copyright © 1996-2009, UNSW SRT - All rights reserved</div>
      
    </div>
  </div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7035806-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>
</html>
